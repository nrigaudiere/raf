!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i():"function"==typeof define&&define.amd?define(i):i()}(0,function(){function t(t,i,n){void 0===n&&(n=!0),this._stopped=!n,this._remainder=0,this._delay=0|t,this._remainingTime=t,this._callback=void 0===i?function(){}:i;var e=this.restart,o=this;this.restart=function(t,i){e.call(o,t,i)},0===this._delay&&(this._stopped=!0)}t.prototype.setCallback=function(t,i){this._callback=void 0===t?function(){}:t,i&&this.restart(i)},t.prototype.stop=function(){this._stopped=!0},t.prototype.start=function(){this._stopped&&this.restart()},t.prototype.restart=function(t,i){void 0===i&&(i=!0),void 0!==t&&(this._delay=t),this._stopped=!1,this._remainingTime=this._delay-this._remainder*+i},t.prototype.update=function(t){this._stopped||(this._remainingTime-=t,this._remainingTime<=0?(this._stopped=!0,this._remainder=-this._remainingTime%this._delay,this._callback(this.restart)):this._remainder=0)},t.prototype.dispose=function(){this._callback=this.restart=function(){},this._stopped=!0,this._remainder=0,this._remainingTime=this._delay};var i=[],n=[],e=[],o=null,r=null,a=s;function s(t){void 0===t&&(t=16.67),null===r&&(r=t);var n=t-r;r=t;for(var e=0;e<i.length;e++)i[e](n);o=window.requestAnimationFrame(a)}function c(t){void 0===t&&(t=16.67),null===r&&(r=t);var s=t-r;r=t;for(var c=0;c<e.length;c++)e[c](s);for(c=0;c<i.length;c++)i[c](s);for(c=0;c<n.length;c++)n[c](s);o=window.requestAnimationFrame(a)}function d(){a=n.length>0||e>0?c:s}function f(){o||(r=null,a())}function u(){o&&(window.cancelAnimationFrame(o),o=null)}var l,h,p={add:function(t){t&&-1===i.indexOf(t)&&(i.push(t),f())},remove:function(t){if(t){var n=i.indexOf(t);-1!==n&&(i.splice(n,1),0===i.length&&u())}},start:f,stop:u,setAfter:function(t){n=Array.isArray(t)?t:[t],d()},setBefore:function(t){e=Array.isArray(t)?t:[t],d()}};function m(t,i,n){void 0===n&&(n=!1),t.innerHTML=(n?"":t.innerHTML)+i+"\n"}!function(){var t=document.querySelector("pre.raf");p.add(function(i){m(t,"Deltatime: "+i+"ms",!0)})}(),l=document.querySelector("pre.fpslimiter"),h=!0,p.add(function(t,i){if(void 0===i)throw new Error("You must specify a callback");void 0===t&&(t=30);var n=1e3/t,e=0;return function(t){(e-=t)<=0&&(i(t),e=n+e%n)}}(1,function(){m(l,(h?"—> Ping!":"<— Pong!")+" (1fps framerate)",!0),console.log("ok"),h=!h})),function(){var i=document.querySelector("pre.raftimer");m(i,"Next call in 1000ms");var n=new t(1e3,function(t){var n=4e3*(Math.random()-.5)+2e3|0;m(i,"Called — Next call in "+n+"ms",!0),t(n)});p.add(function(t){return n.update(t)})}()});
//# sourceMappingURL=raf.umd.js.map
