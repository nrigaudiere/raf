!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){function e(e,t,n){void 0===n&&(n=!0),this._stopped=!n,this._remainder=0,this._delay=0|e,this._remainingTime=e,this._callback=void 0===t?function(){}:t;var i=this.restart,o=this;this.restart=function(e,t){i.call(o,e,t)},0===this._delay&&(this._stopped=!0)}e.prototype.setCallback=function(e,t){this._callback=void 0===e?function(){}:e,t&&this.restart(t)},e.prototype.stop=function(){this._stopped=!0},e.prototype.start=function(){this._stopped&&this.restart()},e.prototype.restart=function(e,t){void 0===t&&(t=!0),void 0!==e&&(this._delay=e),this._stopped=!1,this._remainingTime=this._delay-this._remainder*+t},e.prototype.update=function(e){this._stopped||(this._remainingTime-=e,this._remainingTime<=0?(this._stopped=!0,this._remainder=-this._remainingTime%this._delay,this._callback(this.restart)):this._remainder=0)},e.prototype.dispose=function(){this._callback=this.restart=function(){},this._stopped=!0,this._remainder=0,this._remainingTime=this._delay};var t,n,i="undefined"==typeof window?global:window,o=[],r=[],s=[],a=null,u=null,c=!1,f=!1;function l(e){var d;if(void 0===e&&(e=0),null===u&&(u=e),t+=n=e-u,u=e,a=c?null:i.requestAnimationFrame(l),c&&(c=!1),f){for(d=0;d<s.length;d++)s[d](n);for(d=0;d<o.length;d++)o[d](n);for(d=0;d<r.length;d++)r[d](n)}else for(d=0;d<o.length;d++)o[d](n)}function d(){f=!!(r.length>0||s.length>0)}function h(e,t,n){return!(!t||!e)&&(!~e.indexOf(t)&&((n=!!n)?e.unshift(t):e.push(t),!0))}function p(e,t){if(!t)return!1;var n=e.indexOf(t);return!!~n&&(e.splice(n,1),!(0!==e.length))}function m(e){c=!1,a||(u=null,(e=!!e)?l():a=i.requestAnimationFrame(l))}function _(){a&&(i.cancelAnimationFrame(a),a=null)}var v={add:function(e,t){h(o,e,t)&&m()},addAfter:function(e,t){h(r,e,t)&&d()},addBefore:function(e,t){h(s,e,t)&&d()},remove:function(e){p(o,e)&&_()},removeAfter:function(e,t){p(r,e)&&d()},removeBefore:function(e){console.log("remove"),p(s,e)&&d()},start:m,stop:_,time:t,dt:n,requestOnce:function(){a||(c=!0,u=null,a=i.requestAnimationFrame(l))},dispose:function(){_(),o.length=0,r.length=0,s.length=0,f=!1,u=null,t=0,n=0}};function g(e,t,n){void 0===n&&(n=!1),e.innerHTML=(n?"":e.innerHTML)+t+"\n"}var y,q,b=[];!function(){var e=document.querySelector("pre.log");v.addBefore(function t(n){g(e,"addBefore & requestOnce"),v.removeBefore(t),b.forEach(v.add)}),v.requestOnce()}(),function(){var e=document.querySelector("pre.raf");b.push(function(t){g(e,"Deltatime: "+t+"ms",!0)})}(),y=document.querySelector("pre.fpslimiter"),q=!0,b.push(function(e,t){if(void 0===t)throw new Error("You must specify a callback");void 0===e&&(e=30);var n=1e3/e,i=0;return function(e){(i-=e)<=0&&(t(e),i=n+i%n)}}(1,function(){g(y,(q?"—> Ping!":"<— Pong!")+" (1fps framerate)",!0),console.log("ok"),q=!q})),function(){var t=document.querySelector("pre.raftimer");g(t,"Next call in 1000ms");var n=new e(1e3,function(e){var n=4e3*(Math.random()-.5)+2e3|0;g(t,"Called — Next call in "+n+"ms",!0),e(n)});b.push(function(e){return n.update(e)})}()});
//# sourceMappingURL=raf.umd.js.map
